import{o as V,a as q}from"./evtd.1b0caf17.js";import{A as K,d as G,y as F}from"./seemly.e92b3d25.js";import{d as W,p as ae,g as ue,a as B,o as J,i as Q,x as Z,t as P,c as C,h as T,A as fe,l as j,w as X,n as R,e as ee,q as he}from"./@vue.ae646f9b.js";import{u as Y}from"./@css-render.35e4c47d.js";import{h as pe,u as H,o as ce,i as me}from"./vooks.06bce981.js";import{z as ve}from"./vdirs.4c45093a.js";import{i as be}from"./resize-observer-polyfill.8deb1e21.js";import{C as we}from"./css-render.7bbe45e9.js";function N(n,e="default"){const t=n[e];if(t===void 0)throw new Error(`[vueuc/binder]: slot[${e}] is empty.`);return t()}function ge(n,e="default"){const t=n[e];if(t===void 0)throw new Error(`[vueuc/binder]: slot[${e}] is empty.`);const o=t();if(o.length===1)return o[0];throw new Error(`[vueuc/binder]: slot[${e}] should have exactly one child.`)}let L=null;function te(){if(L===null&&(L=document.getElementById("v-binder-view-measurer"),L===null)){L=document.createElement("div"),L.id="v-binder-view-measurer";const{style:n}=L;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(L)}return L.getBoundingClientRect()}function xe(n,e){const t=te();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function D(n){const e=n.getBoundingClientRect(),t=te();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function ye(n){return n.nodeType===9?null:n.parentNode}function ne(n){if(n===null)return null;const e=ye(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:o,overflowY:r}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+r+o))return e}return ne(e)}const $e=W({name:"Binder",setup(){var n;ae("VBinder",(n=ue())===null||n===void 0?void 0:n.proxy);const e=B(null),t=a=>{e.value=a};let o=[];const r=()=>{let a=e.value;for(;a=ne(a),a!==null;)o.push(a);for(const A of o)q("scroll",A,p,!0)},d=()=>{for(const a of o)V("scroll",a,p,!0);o=[]},u=new Set,b=a=>{u.size===0&&r(),u.has(a)||u.add(a)},h=a=>{u.has(a)&&u.delete(a),u.size===0&&d()},p=()=>{K(S)},S=()=>{u.forEach(a=>a())},c=new Set,l=a=>{c.size===0&&q("resize",window,z),c.has(a)||c.add(a)},$=a=>{c.has(a)&&c.delete(a),c.size===0&&V("resize",window,z)},z=()=>{c.forEach(a=>a())};return J(()=>{V("resize",window,z),d()}),{targetRef:e,setTargetRef:t,addScrollListener:b,removeScrollListener:h,addResizeListener:l,removeResizeListener:$}},render(){return N(this.$slots)}});var De=$e,_e=W({name:"Target",setup(){const{setTargetRef:n}=Q("VBinder");return{setTargetDirective:{mounted:n,updated:n}}},render(){const{setTargetDirective:n}=this;return Z(ge(this.$slots),[[n]])}});function oe(n,e){console.error(`[vueuc/${n}]: ${e}`)}const{c:E}=we();function re(n){return n&-n}class Me{constructor(e,t){this.l=e,this.min=t;const o=new Array(e+1);for(let r=0;r<e+1;++r)o[r]=0;this.ft=o}add(e,t){if(t===0)return;const{l:o,ft:r}=this;for(e+=1;e<=o;)r[e]+=t,e+=re(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===0)return 0;const{ft:t,min:o,l:r}=this;if(e===void 0&&(e=r),e>r)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let d=e*o;for(;e>0;)d+=t[e],e-=re(e);return d}getBound(e){let t=0,o=this.l;for(;o>t;){const r=Math.floor((t+o)/2),d=this.sum(r);if(d>e){o=r;continue}else if(d<e){if(t===r)return this.sum(t+1)<=e?t+1:r;t=r}else return r}return t}}var Se=W({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:pe(P(n,"show")),mergedTo:C(()=>{const{to:e}=n;return e!=null?e:"body"})}},render(){return this.showTeleport?this.disabled?N(this.$slots):T(fe,{disabled:this.disabled,to:this.mergedTo},N(this.$slots)):null}});const _={top:"bottom",bottom:"top",left:"right",right:"left"},ie={start:"end",center:"center",end:"start"},U={top:"height",bottom:"height",left:"width",right:"width"},ze={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},Te={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Ae={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"};function Ie(n,e,t,o,r){if(!o||r)return n;const[d,u]=n.split("-");let b=u!=null?u:"center";if(u!=="center"){const p=Ae[n],S=_[p],c=U[p];t[c]>e[c]&&e[p]+e[c]<=t[c]&&e[p]<e[S]&&(b=ie[u]),t[c]<e[c]&&e[S]<0&&e[p]>e[S]&&(b=ie[u])}let h=d;return!(e[d]>=t[U[d]])&&e[_[d]]>=t[U[d]]&&(h=_[d]),b!=="center"?`${h}-${b}`:h}function Be(n,e){return e?Te[n]:ze[n]}function Ee(n,e,t,o){if(o)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"}}}const We=E([E(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),E(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[E("> *",{pointerEvents:"all"})])]);var Ue=W({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=Q("VBinder"),t=H(()=>n.enabled!==void 0?n.enabled:n.show),o=B(null),r=B(null),d=()=>{const{syncTrigger:l}=n;l.includes("scroll")&&e.addScrollListener(h),l.includes("resize")&&e.addResizeListener(h)},u=()=>{e.removeScrollListener(h),e.removeResizeListener(h)};j(()=>{t.value&&(h(),d())});const b=Y();We.mount({id:"vueuc/binder",head:!0,ssr:b}),J(()=>{u()}),ce(()=>{t.value&&h()});const h=()=>{if(!t.value)return;const l=o.value;if(l===null)return;const $=e.targetRef,{x:z,y:a,overlap:A}=n,y=z!==void 0&&a!==void 0?xe(z,a):D($),{width:x,minWidth:I,placement:i,flip:s}=n;l.setAttribute("v-placement",i),A?l.setAttribute("v-overlap",""):l.removeAttribute("v-overlap");const{style:f}=l;x==="target"?f.width=`${y.width}px`:x!==void 0?f.width=x:f.width="",I==="target"?f.minWidth=`${y.width}px`:I!==void 0?f.minWidth=I:f.minWidth="";const m=D(l),v=D(r.value),w=Ie(i,y,m,s,A),g=Be(w,A),{left:M,top:O,transform:de}=Ee(w,v,y,A);l.setAttribute("v-placement",w),l.style.transform=`translateX(${M}) translateY(${O}) ${de}`,l.style.transformOrigin=g};X(t,l=>{l?(d(),p()):u()});const p=()=>{R().then(h).catch(l=>console.error(l))};["placement","x","y","flip","width","overlap","minWidth"].forEach(l=>{X(P(n,l),h)}),["teleportDisabled"].forEach(l=>{X(P(n,l),p)}),X(P(n,"syncTrigger"),l=>{l.includes("resize")?e.addResizeListener(h):e.removeResizeListener(h),l.includes("scroll")?e.addScrollListener(h):e.removeScrollListener(h)});const S=me(),c=H(()=>{const{to:l}=n;if(l!==void 0)return l;!S.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:r,followerRef:o,mergedTo:c,syncPosition:h}},render(){return T(Se,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{const n=T("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[T("div",{class:"v-binder-follower-content",ref:"followerRef"},this.$slots)]);return this.zindexable?Z(n,[[ve,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):n}})}});class Le{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new be(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const t of e){const o=this.elHandlersMap.get(t.target);o!==void 0&&o(t)}}registerHandler(e,t){this.elHandlersMap.set(e,t),this.observer.observe(e)}unregisterHandler(e){!this.elHandlersMap.has(e)||(this.elHandlersMap.delete(e),this.observer.unobserve(e))}}var se=new Le,le=W({name:"ResizeObserver",props:{onResize:Function},setup(n){return{registered:!1,handleResize(e){const{onResize:t}=n;t!==void 0&&t(e)}}},mounted(){const n=this.$el;n===void 0?oe("resize-observer","$el does not exist."):n.nextElementSibling!==n.nextSibling?oe("resize-observer","$el can not be observed (it may be a text node)."):n.nextElementSibling!==null&&(se.registerHandler(n.nextElementSibling,this.handleResize),this.registered=!0)},beforeUnmount(){this.registered&&se.unregisterHandler(this.$el.nextElementSibling)},render(){return ee(this.$slots,"default")}});const ke=E(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[E("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[E("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]);var qe=W({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(n){const e=Y();ke.mount({id:"vueuc/virtual-list",head:!0,ssr:e}),j(()=>{const{defaultScrollIndex:i,defaultScrollKey:s}=n;i!=null?c({index:i}):s!=null&&c({key:s})});const t=C(()=>{const i=new Map,{keyField:s}=n;return n.items.forEach((f,m)=>{i.set(f[s],m)}),i}),o=B(null),r=B(void 0),d=new Map,u=C(()=>{const{items:i,itemSize:s,keyField:f}=n,m=new Me(i.length,s);return i.forEach((v,w)=>{const g=v[f],M=d.get(g);M!==void 0&&m.add(w,M)}),m}),b=B(0),h=B(0),p=H(()=>Math.max(u.value.getBound(h.value-G(n.paddingTop))-1,0)),S=C(()=>{const{value:i}=r;if(i===void 0)return[];const{items:s,itemSize:f}=n,m=p.value,v=Math.min(m+Math.ceil(i/f+1),s.length-1),w=[];for(let g=m;g<=v;++g)w.push(s[g]);return w}),c=i=>{const{left:s,top:f,index:m,key:v,position:w,behavior:g,debounce:M=!0}=i;if(s!==void 0||f!==void 0)$(s,f,g);else if(m!==void 0)l(m,g,M);else if(v!==void 0){const O=t.value.get(v);O!==void 0&&l(O,g,M)}else w==="bottom"?$(0,Number.MAX_SAFE_INTEGER,g):w==="top"&&$(0,0,g)};function l(i,s,f){const{value:m}=u,v=m.sum(i)+G(n.paddingTop);if(!f)o.value.scrollTo({left:0,top:v,behavior:s});else{const{scrollTop:w,offsetHeight:g}=o.value;if(v>w){const M=m.get(i);v+M<=w+g||o.value.scrollTo({left:0,top:v+M-g,behavior:s})}else o.value.scrollTo({left:0,top:v,behavior:s})}y=i}function $(i,s,f){o.value.scrollTo({left:i,top:s,behavior:f})}function z(i,s){var f;if(n.ignoreItemResize)return;const{value:m}=u,v=t.value.get(i),w=s.target.offsetHeight;w-n.itemSize===0?d.delete(i):d.set(i,w-n.itemSize);const M=w-m.get(v);M!==0&&(x!==void 0&&v<=x&&((f=o.value)===null||f===void 0||f.scrollBy(0,M)),m.add(v,M),b.value++)}function a(i){K(I);const{onScroll:s}=n;s!==void 0&&s(i)}function A(i){r.value=i.contentRect.height;const{onResize:s}=n;s!==void 0&&s(i)}let y,x;function I(){const{value:i}=o;i!=null&&(x=y!=null?y:p.value,y=void 0,h.value=o.value.scrollTop)}return{listHeight:r,listStyle:{overflow:"auto"},keyToIndex:t,itemsStyle:C(()=>{const{itemResizable:i}=n,s=F(u.value.sum());return b.value,[n.itemsStyle,{boxSizing:"content-box",height:i?"":s,minHeight:i?s:"",paddingTop:F(n.paddingTop),paddingBottom:F(n.paddingBottom)}]}),visibleItemsStyle:C(()=>(b.value,{transform:`translate3d(0, ${F(u.value.sum(p.value))}, 0)`})),viewportItems:S,listElRef:o,itemsElRef:B(null),scrollTo:c,handleListResize:A,handleListScroll:a,handleItemResize:z}},render(){const{itemResizable:n,keyField:e,keyToIndex:t,visibleItemsTag:o}=this;return T(le,{onResize:this.handleListResize},{default:()=>{var r,d;return T("div",he(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.onWheel,ref:"listElRef"}),[this.items.length!==0?T("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[T(o,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(u=>{const b=u[e],h=t.get(b),p=this.$slots.default({item:u,index:h})[0];return n?T(le,{key:b,onResize:S=>this.handleItemResize(b,S)},{default:()=>p}):(p.key=b,p)})})]):(d=(r=this.$slots).empty)===null||d===void 0?void 0:d.call(r)])}})}});const Ce=E(".v-x-scroll",{overflow:"auto",scrollbarWidth:"none"},[E("&::-webkit-scrollbar",{width:0,height:0})]);var Ke=W({name:"XScroll",props:{disabled:Boolean,onScroll:Function},setup(){const n=B(null);function e(r){!(r.currentTarget.offsetWidth<r.currentTarget.scrollWidth)||r.deltaY===0||(r.currentTarget.scrollLeft+=r.deltaY+r.deltaX,r.preventDefault())}const t=Y();return Ce.mount({id:"vueuc/x-scroll",head:!0,ssr:t}),Object.assign({selfRef:n,handleWheel:e},{scrollTo(...r){var d;(d=n.value)===null||d===void 0||d.scrollTo(...r)}})},render(){return T("div",{ref:"selfRef",onScroll:this.onScroll,onWheelPassive:this.disabled?void 0:this.handleWheel,class:"v-x-scroll"},this.$slots)}});const k="v-hidden",Oe=E("[v-hidden]",{display:"none!important"});var Ge=W({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(n,{slots:e}){const t=B(null),o=B(null);function r(){const{value:u}=t,{getCounter:b,getTail:h}=n;let p;if(b!==void 0?p=b():p=o.value,!u||!p)return;p.hasAttribute(k)&&p.removeAttribute(k);const{children:S}=u,c=u.offsetWidth,l=[],$=e.tail?h==null?void 0:h():null;let z=$?$.offsetWidth:0,a=!1;const A=u.children.length-(e.tail?1:0);for(let x=0;x<A-1;++x){if(x<0)continue;const I=S[x];if(a){I.hasAttribute(k)||I.setAttribute(k,"");continue}else I.hasAttribute(k)&&I.removeAttribute(k);const i=I.offsetWidth;if(z+=i,l[x]=i,z>c){const{updateCounter:s}=n;for(let f=x;f>=0;--f){const m=A-1-f;s!==void 0?s(m):p.textContent=`${m}`;const v=p.offsetWidth;if(z-=l[f],z+v<=c||f===0){a=!0,x=f-1,$&&(x===-1?($.style.maxWidth=`${c-v}px`,$.style.boxSizing="border-box"):$.style.maxWidth="");break}}}}const{onUpdateOverflow:y}=n;a?y!==void 0&&y(!0):(y!==void 0&&y(!1),p.setAttribute(k,""))}const d=Y();return Oe.mount({id:"vueuc/overflow",head:!0,ssr:d}),j(r),{selfRef:t,counterRef:o,sync:r}},render(){const{$slots:n}=this;return R(this.sync),T("div",{class:"v-overflow",ref:"selfRef"},[ee(n,"default"),n.counter?n.counter():T("span",{style:{display:"inline-block"},ref:"counterRef"}),n.tail?n.tail():null])}});export{Se as L,le as V,qe as a,Ue as b,_e as c,De as d,Ge as e,Ke as f};
